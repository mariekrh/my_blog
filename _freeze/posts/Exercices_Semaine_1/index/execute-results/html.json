{
  "hash": "549a3531343cd3142222391c053832c5",
  "result": {
    "markdown": "---\ntitle: \"Exercices - Semaine 1\"\nauthor: \"Marie Kerhoas\"\ndate: \"2024-03-06\"\ncategories: [Exercices, Paris_2024, JO]\nimage: \"Paris_JO.png\"\ncode-fold: true\nwarning: false\n---\n\n\n## Exercices - Semaine 1\n\nDans ce post, vous trouverez la première série d'exercices sur R. Celle-ci est réalisée à partir d'un fichier répertoriant les sites olympiques des JO de Paris 2024.\n\n### Les libraries\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(utils)\nlibrary(tidygeocoder)\nlibrary(geosphere)\n```\n:::\n\n\n### Question 2\n\nLisez le fichier téléchargé.\n\n\n::: {.cell}\n\n```{.r .cell-code}\npath <- \"paris_2024.csv\"\ndata_ex <- read.table(path,\n                      sep = \";\",\n                      header = TRUE,\n                      quote = \"\\\"\")\n```\n:::\n\n\nQuels sont les noms et la nature des colonnes ?\n\n\n::: {.cell}\n\n```{.r .cell-code}\nclass_data_ex <- sapply(data_ex, class)\npaste(names(class_data_ex), class_data_ex, sep = \": \") |> print()\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] \"geo_point: character\"                     \n[2] \"nom: character\"                           \n[3] \"sites_olympiques_paralympiques: character\"\n[4] \"sports: character\"                        \n```\n:::\n:::\n\n\nCombien de lignes contient la data.frame ?\n\n\n::: {.cell}\n\n```{.r .cell-code}\nr <- nrow(data_ex)\nr\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] 31\n```\n:::\n:::\n\n\n### Question 3\n\nCombien y a t'il de sites olympiques ?\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# liste des sites où \"olympique\" est présent dans la colonne 3\nnb_sites_olympiques <- 0\n\nfor (i in 1:r) {\n  test <-\n    grepl(pattern = \"olympique\",\n          x = data_ex$sites_olympiques_paralympiques[i])\n  if (test == \"TRUE\") {\n    nb_sites_olympiques <- nb_sites_olympiques + 1\n  }\n}\n\nprint(nb_sites_olympiques)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] 26\n```\n:::\n:::\n\n\n### Question 4\n\nCombien y a t'il de sites paralympiques ?\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# liste des sites où \"paralympique\" est présent dans la colonne 3\nnb_sites_paralympiques <- 0\n\nfor (i in 1:r) {\n  test <-\n    grepl(pattern = \"paralympique\",\n          x = data_ex$sites_olympiques_paralympiques[i])\n  if (test == \"TRUE\") {\n    nb_sites_paralympiques <- nb_sites_paralympiques + 1\n  }\n}\n\nprint(nb_sites_paralympiques)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] 19\n```\n:::\n:::\n\n\n### Question 5\n\nQuels sont les sites qui accueillent plusieurs disciplines sportives ?\n\n\n::: {.cell}\n\n```{.r .cell-code}\nsports_diff <- strsplit(data_ex$sport, \"[,]\")\n\n# nombre de sports par lieu\nnb_sports <- numeric(r)\nfor (k in 1:r) {\n  nb <- 0\n  for (i in sports_diff[[k]]) {\n    nb <- nb + 1\n  }\n  nb_sports[[k]] <- nb\n} \n\n# nom des lieux où les épreuves de plusieurs sports se déroulent\nfor (i in 1:r) {\n  if (nb_sports[i] >= 2) {\n    print (data_ex$nom[i])\n  }\n}\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] \"Stade de France\"\n[1] \"Vélodrome National de Saint-Quentin-en-Yvelines\"\n[1] \"Stade Roland Garros\"\n[1] \"Arena Paris Sud 4 (Porte de Versailles)\"\n[1] \"Pont d'Iéna\"\n[1] \"Arena Bercy\"\n[1] \"Arena Paris nord\"\n[1] \"Arena Paris Sud 6 (Porte de Versailles)\"\n[1] \"Stade de la Concorde\"\n[1] \"Arena Champs de Mars\"\n[1] \"La Défense Arena\"\n[1] \"Stade nautique\"\n[1] \"Arena Paris Sud 1 (Porte de Versailles)\"\n[1] \"Stade Tour Eiffel\"\n[1] \"Arena La Chapelle\"\n[1] \"Centre aquatique\"\n[1] \"Château de Versailles\"\n[1] \"Grand Palais\"\n[1] \"Invalides\"\n```\n:::\n:::\n\n\n### Question 6\n\nQuels sont les disciplines para-olympiques accueillies dans ces sites franciliens ?\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Nombre de sports,plusieurs fois les mêmes (70)\nnb_total_sports <- 0\nfor (i in 1:r) {\n  nb_total_sports <- nb_total_sports + nb_sports[i]\n}\n\n# Noms des 70 sports\ntotal_sports <- numeric(nb_total_sports)\ns <- 0\nfor (k in 1:r) {\n  for (i in sports_diff[[k]]) {\n    s <- s + 1\n    total_sports[[k + s - 1]] <- i\n  }\n  s <- s - 1\n}\n\n# Noms des sports par ordre alphabétique\ntotal_sports_bis <- sort(total_sports)\n\n# Nombre de sports différents (60)\ntotal_sports_fini <- numeric(60)\ntotal_sports_fini[1] <- total_sports_bis[1]\nsf <- 2\nfor (i in 2:nb_total_sports) {\n  if (total_sports_bis[i] != total_sports_bis[i - 1]) {\n    total_sports_fini[sf] <- total_sports_bis[i]\n    sf <- sf + 1\n  }\n}\n\n# Noms des sports paralympiques (21)\ntotal_sports_para <- numeric(21)\nsp <- 1\nfor (i in 1:60) {\n  for (j in c(\"Para\", \"fauteuil\", \"assis\", \"Goalball\", \"Boccia\", \"Cécifoot\")) {\n    test <- grepl(pattern = j, x = total_sports_fini[i])\n    if (test == \"TRUE\") {\n      total_sports_para[sp] <- total_sports_fini[i]\n      sp <- sp + 1\n    }\n  }\n}\ntotal_sports_para\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n [1] \"Basket fauteuil\"         \"Boccia\"                 \n [3] \"Cécifoot\"                \"Escrime fauteuil\"       \n [5] \"Goalball\"                \"Para athlétisme\"        \n [7] \"Para aviron\"             \"Para Badminton\"         \n [9] \"Para canoë\"              \"Para cyclisme sur piste\"\n[11] \"Para cyclisme sur route\" \"Para équitation\"        \n[13] \"Para judo\"               \"Para natation\"          \n[15] \"Para powerlifting\"       \"Para taekwondo\"         \n[17] \"Para tennis de table\"    \"Para tir à l'arc\"       \n[19] \"Rugby fauteuil\"          \"Tennis fauteuil\"        \n[21] \"Volley-ball assis\"      \n```\n:::\n:::\n\n\n### Question 7\n\nQuel(s) site(s) accueille(nt) le plus de disciplines différentes ?\n\n\n::: {.cell}\n\n```{.r .cell-code}\nmax_sport <- max(nb_sports)\n\nfor (i in 1:r) {\n  if (nb_sports[i] == max_sport) {\n    print (data_ex$nom[i])\n  }\n}\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] \"Arena Bercy\"\n[1] \"Arena Paris nord\"\n[1] \"Stade de la Concorde\"\n[1] \"Arena Champs de Mars\"\n[1] \"Stade nautique\"\n[1] \"Arena La Chapelle\"\n[1] \"Grand Palais\"\n[1] \"Invalides\"\n```\n:::\n:::\n\n\n### Question 8\n\nQuel discipline aura lieu sur le plus grand nombre de sites ?\n\n\n::: {.cell}\n\n```{.r .cell-code}\nnb_lieux_par_sport <- numeric(60)\nfor (s in 1:60) {\n  presence <- 0\n  for (l in 1:r) {\n    test <- grepl(pattern = total_sports_fini[s], x = data_ex$sports[l])\n    if (test == \"TRUE\") {\n      presence <- presence + 1\n    }\n    nb_lieux_par_sport[s] <- presence\n  }\n}\n\nmax_lieu_par_sport <- max(nb_lieux_par_sport)\n\nfor (i in 1:60) {\n  if (nb_lieux_par_sport[i] == max_lieu_par_sport) {\n    print (total_sports_fini[i])\n  }\n}\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] \"Athlétisme\"\n```\n:::\n:::\n\n\nQuels sont ces sites ?\n\n\n::: {.cell}\n\n```{.r .cell-code}\nfor (l in 1:r) {\n  test <- grepl(pattern = \"Athlétisme\", x = data_ex$sports[l])\n  if (test == \"TRUE\") {\n    print(data_ex$nom[l])\n  }\n}\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] \"Stade de France\"\n[1] \"Hôtel de ville de Paris\"\n[1] \"Pont d'Iéna\"\n[1] \"Invalides\"\n```\n:::\n:::\n\n\n### Question 9\n\nA vol d'oiseau, quels sont les sites les deux sites les plus proches ?\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Création de 2 colonnes : lat et long\ncoord_diff <- strsplit(data_ex$geo_point, \"[,]\")\n\nfor (i in 1:r) {\n  data_ex$lat[i] <- coord_diff[[i]][1]\n  data_ex$long[i] <- coord_diff[[i]][2]\n}\n\ndata_ex$lat <- as.numeric(data_ex$lat)\ndata_ex$long <- as.numeric(data_ex$long)\n\n# Matrice des distances \ndistance <- matrix(nrow = r, ncol = r)\nfor (i in 1:r) {\n  for (j in 1:r) {\n    if (i < j) {\n      distance[i, j] <-\n        distHaversine(c(data_ex$long[i], data_ex$lat[i]),\n                      c(data_ex$long[j], data_ex$lat[j]))\n    }\n  }\n}\n\n# 2 sites à la distance min\nmin_dist <- min(distance, na.rm = TRUE) \n\nsite_min_1 <- 0\nsite_min_2 <- 0\n\nfor (i in 1:r) {\n  for (j in i:r) {\n    if (distHaversine(c(data_ex$long[i], data_ex$lat[i]),\n                      c(data_ex$long[j], data_ex$lat[j])) == min_dist) {\n      site_min_1 <- i\n      site_min_2 <- j\n    }\n  }\n}\n\ndata_ex$nom[site_min_1] \n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] \"Vélodrome National de Saint-Quentin-en-Yvelines\"\n```\n:::\n\n```{.r .cell-code}\ndata_ex$nom[site_min_2] \n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] \"Stade BMX de Saint-Quentin-en-Yvelines\"\n```\n:::\n:::\n\n\n### Question 10\n\nQuels sont les deux sites les plus éloignés ?\n\n\n::: {.cell}\n\n```{.r .cell-code}\nmax_dist <- max(distance, na.rm = TRUE) \n\nsite_max_1 <- 0\nsite_max_2 <- 0\n\nfor (i in 1:r) {\n  for (j in i:r) {\n    if (distHaversine(c(data_ex$long[i], data_ex$lat[i]),\n                      c(data_ex$long[j], data_ex$lat[j])) == max_dist) {\n      site_max_1 <- i\n      site_max_2 <- j\n    }\n  }\n}\n\ndata_ex$nom[site_max_1] \n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] \"Stade nautique\"\n```\n:::\n\n```{.r .cell-code}\ndata_ex$nom[site_max_2] \n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] \"Colline d'Elancourt\"\n```\n:::\n:::\n\n\n### Question 11\n\nVous êtes un heureux millionaire et souhaitez investir dans un bien immobilier. Vous décidez d'acheter un appartement situé au barycentre de l'ensemble des sites olympiques.Où se situe cet appartement ?\n\n\n::: {.cell}\n\n```{.r .cell-code}\nm_long <- mean(data_ex$long)\nm_lat <- mean(data_ex$lat)\n\nreverse_geo(m_lat, m_long)$address\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] \"23, Avenue Pierre 1er de Serbie, Quartier de Chaillot, Paris 16e Arrondissement, Paris, Île-de-France, France métropolitaine, 75116, France\"\n```\n:::\n:::\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}